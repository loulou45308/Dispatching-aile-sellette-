<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Lecteur de Stage</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-100 p-8 font-sans text-slate-900">

    <div class="max-w-3xl mx-auto">
        
        <header id="headerStage" class="bg-blue-900 text-white p-6 rounded-t-2xl shadow-lg hidden">
            <p class="text-[10px] font-bold uppercase opacity-60 tracking-widest mb-1">DOSSIER EN COURS</p>
            <h1 id="titreStage" class="text-3xl font-black uppercase italic">Nom du stage...</h1>
        </header>

        <div class="bg-white p-8 rounded-b-2xl shadow-xl border-x border-b border-slate-200 mb-8">
            <label class="block cursor-pointer">
                <span class="sr-only">Charger le fichier</span>
                <input type="file" id="inputFile" class="block w-full text-sm text-slate-500
                  file:mr-4 file:py-3 file:px-6
                  file:rounded-full file:border-0
                  file:text-xs file:font-black file:uppercase
                  file:bg-blue-50 file:text-blue-700
                  hover:file:bg-blue-100
                "/>
            </label>
            <p class="text-[10px] text-slate-400 mt-2 ml-4 italic">Sélectionne le fichier "stage init ez.csv"</p>
        </div>

        <div id="zoneResultat" class="hidden bg-white rounded-3xl shadow-xl overflow-hidden border border-slate-200">
            <div class="p-6 bg-slate-50 border-b flex justify-between items-center">
                <h2 class="font-black text-slate-800 uppercase">Liste des Pilotes</h2>
                <span id="compteur" class="bg-blue-600 text-white px-3 py-1 rounded-full text-xs font-bold">0</span>
            </div>
            
            <table class="w-full text-left">
                <thead class="bg-slate-100 text-slate-500 text-[10px] uppercase font-bold tracking-wider">
                    <tr>
                        <th class="p-4">Nom</th>
                        <th class="p-4 text-center">Poids</th>
                        <th class="p-4 text-center">Taille</th>
                        <th class="p-4 text-center">Âge (Date Naiss.)</th>
                    </tr>
                </thead>
                <tbody id="tbody" class="divide-y divide-slate-100 text-sm font-medium text-slate-700">
                    </tbody>
            </table>
        </div>

    </div>

    <script>
        document.getElementById('inputFile').addEventListener('change', function(e) {
            const reader = new FileReader();
            
            reader.onload = function(event) {
                const content = event.target.result;
                const rows = content.split(/\r?\n/);
                
                // 1. Récupérer